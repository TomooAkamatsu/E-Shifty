{"ast":null,"code":"import { __assign } from 'tslib';\nimport { animate } from './index.js';\nimport { velocityPerSecond } from '../utils/velocity-per-second.js';\nimport { getFrameData } from 'framesync';\n\nfunction inertia(_a) {\n  var _b = _a.from,\n      from = _b === void 0 ? 0 : _b,\n      _c = _a.velocity,\n      velocity = _c === void 0 ? 0 : _c,\n      min = _a.min,\n      max = _a.max,\n      _d = _a.power,\n      power = _d === void 0 ? 0.8 : _d,\n      _e = _a.timeConstant,\n      timeConstant = _e === void 0 ? 750 : _e,\n      _f = _a.bounceStiffness,\n      bounceStiffness = _f === void 0 ? 500 : _f,\n      _g = _a.bounceDamping,\n      bounceDamping = _g === void 0 ? 10 : _g,\n      _h = _a.restDelta,\n      restDelta = _h === void 0 ? 1 : _h,\n      modifyTarget = _a.modifyTarget,\n      driver = _a.driver,\n      onUpdate = _a.onUpdate,\n      onComplete = _a.onComplete,\n      onStop = _a.onStop;\n  var currentAnimation;\n\n  function isOutOfBounds(v) {\n    return min !== undefined && v < min || max !== undefined && v > max;\n  }\n\n  function boundaryNearest(v) {\n    if (min === undefined) return max;\n    if (max === undefined) return min;\n    return Math.abs(min - v) < Math.abs(max - v) ? min : max;\n  }\n\n  function startAnimation(options) {\n    currentAnimation === null || currentAnimation === void 0 ? void 0 : currentAnimation.stop();\n    currentAnimation = animate(__assign(__assign({}, options), {\n      driver: driver,\n      onUpdate: function (v) {\n        var _a;\n\n        onUpdate === null || onUpdate === void 0 ? void 0 : onUpdate(v);\n        (_a = options.onUpdate) === null || _a === void 0 ? void 0 : _a.call(options, v);\n      },\n      onComplete: onComplete,\n      onStop: onStop\n    }));\n  }\n\n  function startSpring(options) {\n    startAnimation(__assign({\n      type: \"spring\",\n      stiffness: bounceStiffness,\n      damping: bounceDamping,\n      restDelta: restDelta\n    }, options));\n  }\n\n  if (isOutOfBounds(from)) {\n    startSpring({\n      from: from,\n      velocity: velocity,\n      to: boundaryNearest(from)\n    });\n  } else {\n    var target = power * velocity + from;\n    if (typeof modifyTarget !== \"undefined\") target = modifyTarget(target);\n    var boundary_1 = boundaryNearest(target);\n    var heading_1 = boundary_1 === min ? -1 : 1;\n    var prev_1;\n    var current_1;\n\n    var checkBoundary = function (v) {\n      prev_1 = current_1;\n      current_1 = v;\n      velocity = velocityPerSecond(v - prev_1, getFrameData().delta);\n\n      if (heading_1 === 1 && v > boundary_1 || heading_1 === -1 && v < boundary_1) {\n        startSpring({\n          from: v,\n          to: boundary_1,\n          velocity: velocity\n        });\n      }\n    };\n\n    startAnimation({\n      type: \"decay\",\n      from: from,\n      velocity: velocity,\n      timeConstant: timeConstant,\n      power: power,\n      restDelta: restDelta,\n      modifyTarget: modifyTarget,\n      onUpdate: isOutOfBounds(target) ? checkBoundary : undefined\n    });\n  }\n\n  return {\n    stop: function () {\n      return currentAnimation === null || currentAnimation === void 0 ? void 0 : currentAnimation.stop();\n    }\n  };\n}\n\nexport { inertia };","map":{"version":3,"names":["__assign","animate","velocityPerSecond","getFrameData","inertia","_a","_b","from","_c","velocity","min","max","_d","power","_e","timeConstant","_f","bounceStiffness","_g","bounceDamping","_h","restDelta","modifyTarget","driver","onUpdate","onComplete","onStop","currentAnimation","isOutOfBounds","v","undefined","boundaryNearest","Math","abs","startAnimation","options","stop","call","startSpring","type","stiffness","damping","to","target","boundary_1","heading_1","prev_1","current_1","checkBoundary","delta"],"sources":["/Users/AkamatsuTomoo/Work/sma/docker/frontend/node_modules/popmotion/dist/es/animations/inertia.js"],"sourcesContent":["import { __assign } from 'tslib';\nimport { animate } from './index.js';\nimport { velocityPerSecond } from '../utils/velocity-per-second.js';\nimport { getFrameData } from 'framesync';\n\nfunction inertia(_a) {\n    var _b = _a.from, from = _b === void 0 ? 0 : _b, _c = _a.velocity, velocity = _c === void 0 ? 0 : _c, min = _a.min, max = _a.max, _d = _a.power, power = _d === void 0 ? 0.8 : _d, _e = _a.timeConstant, timeConstant = _e === void 0 ? 750 : _e, _f = _a.bounceStiffness, bounceStiffness = _f === void 0 ? 500 : _f, _g = _a.bounceDamping, bounceDamping = _g === void 0 ? 10 : _g, _h = _a.restDelta, restDelta = _h === void 0 ? 1 : _h, modifyTarget = _a.modifyTarget, driver = _a.driver, onUpdate = _a.onUpdate, onComplete = _a.onComplete, onStop = _a.onStop;\n    var currentAnimation;\n    function isOutOfBounds(v) {\n        return (min !== undefined && v < min) || (max !== undefined && v > max);\n    }\n    function boundaryNearest(v) {\n        if (min === undefined)\n            return max;\n        if (max === undefined)\n            return min;\n        return Math.abs(min - v) < Math.abs(max - v) ? min : max;\n    }\n    function startAnimation(options) {\n        currentAnimation === null || currentAnimation === void 0 ? void 0 : currentAnimation.stop();\n        currentAnimation = animate(__assign(__assign({}, options), { driver: driver, onUpdate: function (v) {\n                var _a;\n                onUpdate === null || onUpdate === void 0 ? void 0 : onUpdate(v);\n                (_a = options.onUpdate) === null || _a === void 0 ? void 0 : _a.call(options, v);\n            }, onComplete: onComplete,\n            onStop: onStop }));\n    }\n    function startSpring(options) {\n        startAnimation(__assign({ type: \"spring\", stiffness: bounceStiffness, damping: bounceDamping, restDelta: restDelta }, options));\n    }\n    if (isOutOfBounds(from)) {\n        startSpring({ from: from, velocity: velocity, to: boundaryNearest(from) });\n    }\n    else {\n        var target = power * velocity + from;\n        if (typeof modifyTarget !== \"undefined\")\n            target = modifyTarget(target);\n        var boundary_1 = boundaryNearest(target);\n        var heading_1 = boundary_1 === min ? -1 : 1;\n        var prev_1;\n        var current_1;\n        var checkBoundary = function (v) {\n            prev_1 = current_1;\n            current_1 = v;\n            velocity = velocityPerSecond(v - prev_1, getFrameData().delta);\n            if ((heading_1 === 1 && v > boundary_1) ||\n                (heading_1 === -1 && v < boundary_1)) {\n                startSpring({ from: v, to: boundary_1, velocity: velocity });\n            }\n        };\n        startAnimation({\n            type: \"decay\",\n            from: from,\n            velocity: velocity,\n            timeConstant: timeConstant,\n            power: power,\n            restDelta: restDelta,\n            modifyTarget: modifyTarget,\n            onUpdate: isOutOfBounds(target) ? checkBoundary : undefined,\n        });\n    }\n    return {\n        stop: function () { return currentAnimation === null || currentAnimation === void 0 ? void 0 : currentAnimation.stop(); },\n    };\n}\n\nexport { inertia };\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}