{"ast":null,"code":"import { memoizedGet as get } from \"@chakra-ui/utils\";\nimport merge from \"lodash.mergewith\";\nimport { sort } from \"../utils\";\nimport { createMediaQuery, parseResponsiveArray, parseResponsiveObject } from \"./parse-responsive\";\nvar defaultBreakpoints = [40, 52, 64].map(n => n + \"em\");\nexport function createParser(config) {\n  var cache = new Map();\n\n  var parse = props => {\n    var _props$theme, _props$theme$config;\n\n    var styles = {};\n    var shouldSort = false;\n    var isCacheDisabled = (_props$theme = props.theme) == null ? void 0 : (_props$theme$config = _props$theme.config) == null ? void 0 : _props$theme$config.disableStyledSystemCache;\n\n    for (var prop in props) {\n      var _props$theme2;\n\n      if (!config[prop]) continue;\n      var styleFunction = config[prop];\n      var value = props[prop];\n      var theme = (_props$theme2 = props.theme) != null ? _props$theme2 : {};\n      var scale = get(theme, styleFunction.scale, styleFunction.defaults);\n\n      if (typeof value === \"object\") {\n        var bps = !isCacheDisabled && cache.get(\"breakpoints\") || get(theme, \"breakpoints\", defaultBreakpoints);\n        cache.set(\"breakpoints\", bps);\n\n        if (Array.isArray(value)) {\n          var _bps = !isCacheDisabled && cache.get(\"media\") || [null, ...cache.get(\"breakpoints\").map(createMediaQuery)];\n\n          cache.set(\"media\", _bps);\n          var style = parseResponsiveArray({\n            mediaQueries: cache.get(\"media\"),\n            styleFunction,\n            scale,\n            value,\n            props\n          });\n          styles = merge(styles, style);\n          continue;\n        }\n\n        if (value !== null) {\n          var _style = parseResponsiveObject({\n            breakpoints: cache.get(\"breakpoints\"),\n            styleFunction,\n            scale,\n            value,\n            props\n          });\n\n          styles = merge(styles, _style);\n          shouldSort = true;\n        }\n\n        continue;\n      }\n\n      styles = merge({}, styles, styleFunction(value, scale, props));\n    } // sort object-based responsive styles\n\n\n    if (shouldSort) {\n      styles = sort(styles);\n    }\n\n    return styles;\n  };\n\n  parse.config = config;\n  parse.propNames = Object.keys(config);\n  parse.cache = cache;\n  var keys = Object.keys(config).filter(key => key !== \"config\");\n\n  if (keys.length > 1) {\n    keys.forEach(key => {\n      parse[key] = createParser({\n        [key]: config[key]\n      });\n    });\n  }\n\n  return parse;\n}","map":{"version":3,"sources":["../../../src/core/create-parser.ts"],"names":["memoizedGet","defaultBreakpoints","n","cache","parse","props","styles","shouldSort","isCacheDisabled","config","styleFunction","value","theme","scale","get","bps","Array","style","parseResponsiveArray","mediaQueries","merge","parseResponsiveObject","breakpoints","sort","Object","keys","key","createParser"],"mappings":"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","sourcesContent":["import { Dict, memoizedGet as get } from \"@chakra-ui/utils\"\nimport merge from \"lodash.mergewith\"\nimport { sort } from \"../utils\"\nimport {\n  createMediaQuery,\n  parseResponsiveArray,\n  parseResponsiveObject,\n} from \"./parse-responsive\"\nimport { PropConfig } from \"./types\"\n\nconst defaultBreakpoints = [40, 52, 64].map((n) => `${n}em`)\n\nexport function createParser(config: PropConfig) {\n  const cache = new Map<string, any>()\n\n  const parse = (props: Dict) => {\n    let styles: Dict = {}\n    let shouldSort = false\n    const isCacheDisabled = props.theme?.config?.disableStyledSystemCache\n\n    for (const prop in props) {\n      if (!config[prop]) continue\n\n      const styleFunction = config[prop]\n      const value = props[prop]\n      const theme = props.theme ?? {}\n\n      const scale = get(theme, styleFunction.scale, styleFunction.defaults)\n\n      if (typeof value === \"object\") {\n        const bps =\n          (!isCacheDisabled && cache.get(\"breakpoints\")) ||\n          get(theme, \"breakpoints\", defaultBreakpoints)\n\n        cache.set(\"breakpoints\", bps)\n\n        if (Array.isArray(value)) {\n          const bps = (!isCacheDisabled && cache.get(\"media\")) || [\n            null,\n            ...cache.get(\"breakpoints\").map(createMediaQuery),\n          ]\n\n          cache.set(\"media\", bps)\n\n          const style = parseResponsiveArray({\n            mediaQueries: cache.get(\"media\"),\n            styleFunction,\n            scale,\n            value,\n            props,\n          })\n\n          styles = merge(styles, style)\n          continue\n        }\n\n        if (value !== null) {\n          const style = parseResponsiveObject({\n            breakpoints: cache.get(\"breakpoints\"),\n            styleFunction,\n            scale,\n            value,\n            props,\n          })\n          styles = merge(styles, style)\n          shouldSort = true\n        }\n        continue\n      }\n      styles = merge({}, styles, styleFunction(value, scale, props))\n    }\n\n    // sort object-based responsive styles\n    if (shouldSort) {\n      styles = sort(styles)\n    }\n\n    return styles\n  }\n\n  parse.config = config\n  parse.propNames = Object.keys(config)\n  parse.cache = cache\n\n  const keys = Object.keys(config).filter((key) => key !== \"config\")\n\n  if (keys.length > 1) {\n    keys.forEach((key) => {\n      parse[key] = createParser({ [key]: config[key] })\n    })\n  }\n\n  return parse\n}\n"]},"metadata":{},"sourceType":"module"}