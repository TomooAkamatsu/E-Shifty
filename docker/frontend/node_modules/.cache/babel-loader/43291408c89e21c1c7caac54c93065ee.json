{"ast":null,"code":"import { isNumber, isCustomBreakpoint } from \"@chakra-ui/utils\";\nexport default function createMediaQueries(breakpoints) {\n  return Object.entries(breakpoints).filter(_ref => {\n    var [key] = _ref;\n    return isCustomBreakpoint(key);\n  }) // sort css units in ascending order to ensure media queries are generated\n  // in the correct order and reference to each other correctly aswell\n  .sort((a, b) => Number.parseInt(a[1], 10) > Number.parseInt(b[1], 10) ? 1 : -1).map((_ref2, index, arr) => {\n    var [breakpoint, minWidth] = _ref2; // given a following breakpoint\n\n    var next = arr[index + 1]; // this breakpoint must end prior the threshold of the next\n\n    var maxWidth = next ? next[1] : undefined;\n    var query = createMediaQueryString(minWidth, maxWidth);\n    return {\n      minWidth,\n      maxWidth,\n      breakpoint,\n      query\n    };\n  });\n}\n/**\n * Create a media query string from the breakpoints,\n * using a combination of `min-width` and `max-width`.\n */\n\nfunction createMediaQueryString(minWidth, maxWidth) {\n  var hasMinWidth = parseInt(minWidth, 10) >= 0;\n\n  if (!hasMinWidth && !maxWidth) {\n    return \"\";\n  }\n\n  var query = \"(min-width: \" + toMediaString(minWidth) + \")\";\n\n  if (!maxWidth) {\n    return query;\n  }\n\n  if (query) {\n    query += \" and \";\n  }\n\n  query += \"(max-width: \" + toMediaString(subtract(maxWidth)) + \")\";\n  return query;\n}\n\nvar measurementRegex = /([0-9]+\\.?[0-9]*)/;\n\nvar calculateMeasurement = (value, modifier) => {\n  if (typeof value === \"number\") {\n    return \"\" + (value + modifier);\n  }\n\n  return value.replace(measurementRegex, match => \"\" + (parseFloat(match) + modifier));\n};\n/**\n * 0.01 and 0.1 are too small of a difference for `px` breakpoint values\n *\n * @see https://github.com/chakra-ui/chakra-ui/issues/2188#issuecomment-712774785\n */\n\n\nfunction subtract(value) {\n  return calculateMeasurement(value, value.endsWith(\"px\") ? -1 : -0.01);\n}\n/**\n * Convert media query value to string\n */\n\n\nfunction toMediaString(value) {\n  return isNumber(value) ? value + \"px\" : value;\n}","map":{"version":3,"sources":["../../src/create-media-query.ts"],"names":["isCustomBreakpoint","Number","a","b","next","arr","index","maxWidth","query","createMediaQueryString","hasMinWidth","parseInt","toMediaString","subtract","measurementRegex","calculateMeasurement","value","match","parseFloat","isNumber"],"mappings":"AAAA,SAAA,QAAA,EAAA,kBAAA,QAAA,kBAAA;AAEA,eAAe,SAAA,kBAAA,CAAA,WAAA,EAEC;EACd,OACE,MAAM,CAAN,OAAA,CAAA,WAAA,EAAA,MAAA,CACU,IAAA,IAAA;IAAA,IAAC,CAAD,GAAC,IAAD,IAAA;IAAA,OAAWA,kBAAkB,CAA7B,GAA6B,CAA7B;EADV,CAAA,EAEE;EACA;EAHF,CAAA,IAAA,CAIQ,CAAA,CAAA,EAAA,CAAA,KACJC,MAAM,CAANA,QAAAA,CAAgBC,CAAC,CAAjBD,CAAiB,CAAjBA,EAAAA,EAAAA,IAA4BA,MAAM,CAANA,QAAAA,CAAgBE,CAAC,CAAjBF,CAAiB,CAAjBA,EAA5BA,EAA4BA,CAA5BA,GAAAA,CAAAA,GAA4D,CALhE,CAAA,EAAA,GAAA,CAOO,CAAA,KAAA,EAAA,KAAA,EAAA,GAAA,KAAwC;IAAA,IAAvC,CAAA,UAAA,EAAA,QAAA,IAAuC,KAAA,CAAA,CAC3C;;IACA,IAAMG,IAAI,GAAGC,GAAG,CAACC,KAAK,GAFqB,CAE3B,CAAhB,CAF2C,CAG3C;;IACA,IAAMC,QAAQ,GAAGH,IAAI,GAAGA,IAAI,CAAP,CAAO,CAAP,GAArB,SAAA;IACA,IAAMI,KAAK,GAAGC,sBAAsB,CAAA,QAAA,EAApC,QAAoC,CAApC;IAEA,OAAO;MAAA,QAAA;MAAA,QAAA;MAAA,UAAA;MAILD;IAJK,CAAP;EAfN,CACE,CADF;AAuBD;AAED;AACA;AACA;AACA;;AACA,SAAA,sBAAA,CAAA,QAAA,EAAA,QAAA,EAAqE;EACnE,IAAME,WAAW,GAAGC,QAAQ,CAAA,QAAA,EAARA,EAAQ,CAARA,IAApB,CAAA;;EAEA,IAAI,CAAA,WAAA,IAAgB,CAApB,QAAA,EAA+B;IAC7B,OAAA,EAAA;EACD;;EAED,IAAIH,KAAK,GAAA,iBAAkBI,aAAa,CAA/B,QAA+B,CAA/B,GAAT,GAAA;;EAEA,IAAI,CAAJ,QAAA,EAAe;IACb,OAAA,KAAA;EACD;;EAED,IAAA,KAAA,EAAW;IACTJ,KAAK,IAALA,OAAAA;EACD;;EAEDA,KAAK,IAAA,iBAAmBI,aAAa,CAACC,QAAQ,CAAzC,QAAyC,CAAT,CAAhC,GAALL,GAAAA;EAEA,OAAA,KAAA;AACD;;AASD,IAAMM,gBAAgB,GAAtB,mBAAA;;AAEA,IAAMC,oBAAoB,GAAG,CAAA,KAAA,EAAA,QAAA,KAGhB;EACX,IAAI,OAAA,KAAA,KAAJ,QAAA,EAA+B;IAC7B,OAAA,MAAUC,KAAK,GAAf,QAAA,CAAA;EACD;;EAED,OAAOA,KAAK,CAALA,OAAAA,CAAAA,gBAAAA,EAEJC,KAAD,IAAA,MAAcC,UAAU,CAAVA,KAAU,CAAVA,GAFhB,QAEE,CAFKF,CAAP;AARF,CAAA;AAcA;AACA;AACA;AACA;AACA;;;AACA,SAAA,QAAA,CAAA,KAAA,EAAiC;EAC/B,OAAOD,oBAAoB,CAAA,KAAA,EAAQC,KAAK,CAALA,QAAAA,CAAAA,IAAAA,IAAuB,CAAvBA,CAAAA,GAA4B,CAA/D,IAA2B,CAA3B;AACD;AAED;AACA;AACA;;;AACA,SAAA,aAAA,CAAA,KAAA,EAA8C;EAC5C,OAAOG,QAAQ,CAARA,KAAQ,CAARA,GAAqBH,KAArBG,GAAAA,IAAAA,GAAP,KAAA;AACD","sourcesContent":["import { isNumber, isCustomBreakpoint, StringOrNumber } from \"@chakra-ui/utils\"\n\nexport default function createMediaQueries(\n  breakpoints: string[],\n): MediaQuery[] {\n  return (\n    Object.entries(breakpoints)\n      .filter(([key]) => isCustomBreakpoint(key))\n      // sort css units in ascending order to ensure media queries are generated\n      // in the correct order and reference to each other correctly aswell\n      .sort((a, b) =>\n        Number.parseInt(a[1], 10) > Number.parseInt(b[1], 10) ? 1 : -1,\n      )\n      .map(([breakpoint, minWidth], index, arr) => {\n        // given a following breakpoint\n        const next = arr[index + 1]\n        // this breakpoint must end prior the threshold of the next\n        const maxWidth = next ? next[1] : undefined\n        const query = createMediaQueryString(minWidth, maxWidth)\n\n        return {\n          minWidth,\n          maxWidth,\n          breakpoint,\n          query,\n        }\n      })\n  )\n}\n\n/**\n * Create a media query string from the breakpoints,\n * using a combination of `min-width` and `max-width`.\n */\nfunction createMediaQueryString(minWidth: string, maxWidth?: string) {\n  const hasMinWidth = parseInt(minWidth, 10) >= 0\n\n  if (!hasMinWidth && !maxWidth) {\n    return \"\"\n  }\n\n  let query = `(min-width: ${toMediaString(minWidth)})`\n\n  if (!maxWidth) {\n    return query\n  }\n\n  if (query) {\n    query += \" and \"\n  }\n\n  query += `(max-width: ${toMediaString(subtract(maxWidth))})`\n\n  return query\n}\n\ninterface MediaQuery {\n  breakpoint: string\n  maxWidth?: string\n  minWidth: string\n  query: string\n}\n\nconst measurementRegex = /(\\d+\\.?\\d*)/u\n\nconst calculateMeasurement = (\n  value: StringOrNumber,\n  modifier: number,\n): string => {\n  if (typeof value === \"number\") {\n    return `${value + modifier}`\n  }\n\n  return value.replace(\n    measurementRegex,\n    (match) => `${parseFloat(match) + modifier}`,\n  )\n}\n\n/**\n * 0.01 and 0.1 are too small of a difference for `px` breakpoint values\n *\n * @see https://github.com/chakra-ui/chakra-ui/issues/2188#issuecomment-712774785\n */\nfunction subtract(value: string) {\n  return calculateMeasurement(value, value.endsWith(\"px\") ? -1 : -0.01)\n}\n\n/**\n * Convert media query value to string\n */\nfunction toMediaString(value: StringOrNumber) {\n  return isNumber(value) ? `${value}px` : value\n}\n"]},"metadata":{},"sourceType":"module"}