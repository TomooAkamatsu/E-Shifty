{"ast":null,"code":"var _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) {\n  return typeof obj;\n} : function (obj) {\n  return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n};\n\nimport { FOCUS_DISABLED, FOCUS_GROUP } from '../constants';\nimport { asArray, toArray } from './array';\n\nvar filterNested = function filterNested(nodes) {\n  var l = nodes.length;\n\n  for (var i = 0; i < l; i += 1) {\n    var _loop = function _loop(j) {\n      if (i !== j) {\n        if (nodes[i].contains(nodes[j])) {\n          return {\n            v: filterNested(nodes.filter(function (x) {\n              return x !== nodes[j];\n            }))\n          };\n        }\n      }\n    };\n\n    for (var j = 0; j < l; j += 1) {\n      var _ret = _loop(j);\n\n      if ((typeof _ret === 'undefined' ? 'undefined' : _typeof(_ret)) === \"object\") return _ret.v;\n    }\n  }\n\n  return nodes;\n};\n\nvar getTopParent = function getTopParent(node) {\n  return node.parentNode ? getTopParent(node.parentNode) : node;\n};\n\nvar getAllAffectedNodes = function getAllAffectedNodes(node) {\n  var nodes = asArray(node);\n  return nodes.filter(Boolean).reduce(function (acc, currentNode) {\n    var group = currentNode.getAttribute(FOCUS_GROUP);\n    acc.push.apply(acc, group ? filterNested(toArray(getTopParent(currentNode).querySelectorAll('[' + FOCUS_GROUP + '=\"' + group + '\"]:not([' + FOCUS_DISABLED + '=\"disabled\"])'))) : [currentNode]);\n    return acc;\n  }, []);\n};\n\nexport default getAllAffectedNodes;","map":{"version":3,"names":["_typeof","Symbol","iterator","obj","constructor","prototype","FOCUS_DISABLED","FOCUS_GROUP","asArray","toArray","filterNested","nodes","l","length","i","_loop","j","contains","v","filter","x","_ret","getTopParent","node","parentNode","getAllAffectedNodes","Boolean","reduce","acc","currentNode","group","getAttribute","push","apply","querySelectorAll"],"sources":["/Users/AkamatsuTomoo/Work/sma/docker/frontend/node_modules/focus-lock/dist/es2015/utils/all-affected.js"],"sourcesContent":["var _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nimport { FOCUS_DISABLED, FOCUS_GROUP } from '../constants';\nimport { asArray, toArray } from './array';\n\nvar filterNested = function filterNested(nodes) {\n  var l = nodes.length;\n  for (var i = 0; i < l; i += 1) {\n    var _loop = function _loop(j) {\n      if (i !== j) {\n        if (nodes[i].contains(nodes[j])) {\n          return {\n            v: filterNested(nodes.filter(function (x) {\n              return x !== nodes[j];\n            }))\n          };\n        }\n      }\n    };\n\n    for (var j = 0; j < l; j += 1) {\n      var _ret = _loop(j);\n\n      if ((typeof _ret === 'undefined' ? 'undefined' : _typeof(_ret)) === \"object\") return _ret.v;\n    }\n  }\n  return nodes;\n};\n\nvar getTopParent = function getTopParent(node) {\n  return node.parentNode ? getTopParent(node.parentNode) : node;\n};\n\nvar getAllAffectedNodes = function getAllAffectedNodes(node) {\n  var nodes = asArray(node);\n  return nodes.filter(Boolean).reduce(function (acc, currentNode) {\n    var group = currentNode.getAttribute(FOCUS_GROUP);\n    acc.push.apply(acc, group ? filterNested(toArray(getTopParent(currentNode).querySelectorAll('[' + FOCUS_GROUP + '=\"' + group + '\"]:not([' + FOCUS_DISABLED + '=\"disabled\"])'))) : [currentNode]);\n    return acc;\n  }, []);\n};\n\nexport default getAllAffectedNodes;"],"mappings":"AAAA,IAAIA,OAAO,GAAG,OAAOC,MAAP,KAAkB,UAAlB,IAAgC,OAAOA,MAAM,CAACC,QAAd,KAA2B,QAA3D,GAAsE,UAAUC,GAAV,EAAe;EAAE,OAAO,OAAOA,GAAd;AAAoB,CAA3G,GAA8G,UAAUA,GAAV,EAAe;EAAE,OAAOA,GAAG,IAAI,OAAOF,MAAP,KAAkB,UAAzB,IAAuCE,GAAG,CAACC,WAAJ,KAAoBH,MAA3D,IAAqEE,GAAG,KAAKF,MAAM,CAACI,SAApF,GAAgG,QAAhG,GAA2G,OAAOF,GAAzH;AAA+H,CAA5Q;;AAEA,SAASG,cAAT,EAAyBC,WAAzB,QAA4C,cAA5C;AACA,SAASC,OAAT,EAAkBC,OAAlB,QAAiC,SAAjC;;AAEA,IAAIC,YAAY,GAAG,SAASA,YAAT,CAAsBC,KAAtB,EAA6B;EAC9C,IAAIC,CAAC,GAAGD,KAAK,CAACE,MAAd;;EACA,KAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGF,CAApB,EAAuBE,CAAC,IAAI,CAA5B,EAA+B;IAC7B,IAAIC,KAAK,GAAG,SAASA,KAAT,CAAeC,CAAf,EAAkB;MAC5B,IAAIF,CAAC,KAAKE,CAAV,EAAa;QACX,IAAIL,KAAK,CAACG,CAAD,CAAL,CAASG,QAAT,CAAkBN,KAAK,CAACK,CAAD,CAAvB,CAAJ,EAAiC;UAC/B,OAAO;YACLE,CAAC,EAAER,YAAY,CAACC,KAAK,CAACQ,MAAN,CAAa,UAAUC,CAAV,EAAa;cACxC,OAAOA,CAAC,KAAKT,KAAK,CAACK,CAAD,CAAlB;YACD,CAFe,CAAD;UADV,CAAP;QAKD;MACF;IACF,CAVD;;IAYA,KAAK,IAAIA,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGJ,CAApB,EAAuBI,CAAC,IAAI,CAA5B,EAA+B;MAC7B,IAAIK,IAAI,GAAGN,KAAK,CAACC,CAAD,CAAhB;;MAEA,IAAI,CAAC,OAAOK,IAAP,KAAgB,WAAhB,GAA8B,WAA9B,GAA4CrB,OAAO,CAACqB,IAAD,CAApD,MAAgE,QAApE,EAA8E,OAAOA,IAAI,CAACH,CAAZ;IAC/E;EACF;;EACD,OAAOP,KAAP;AACD,CAtBD;;AAwBA,IAAIW,YAAY,GAAG,SAASA,YAAT,CAAsBC,IAAtB,EAA4B;EAC7C,OAAOA,IAAI,CAACC,UAAL,GAAkBF,YAAY,CAACC,IAAI,CAACC,UAAN,CAA9B,GAAkDD,IAAzD;AACD,CAFD;;AAIA,IAAIE,mBAAmB,GAAG,SAASA,mBAAT,CAA6BF,IAA7B,EAAmC;EAC3D,IAAIZ,KAAK,GAAGH,OAAO,CAACe,IAAD,CAAnB;EACA,OAAOZ,KAAK,CAACQ,MAAN,CAAaO,OAAb,EAAsBC,MAAtB,CAA6B,UAAUC,GAAV,EAAeC,WAAf,EAA4B;IAC9D,IAAIC,KAAK,GAAGD,WAAW,CAACE,YAAZ,CAAyBxB,WAAzB,CAAZ;IACAqB,GAAG,CAACI,IAAJ,CAASC,KAAT,CAAeL,GAAf,EAAoBE,KAAK,GAAGpB,YAAY,CAACD,OAAO,CAACa,YAAY,CAACO,WAAD,CAAZ,CAA0BK,gBAA1B,CAA2C,MAAM3B,WAAN,GAAoB,IAApB,GAA2BuB,KAA3B,GAAmC,UAAnC,GAAgDxB,cAAhD,GAAiE,eAA5G,CAAD,CAAR,CAAf,GAAyJ,CAACuB,WAAD,CAAlL;IACA,OAAOD,GAAP;EACD,CAJM,EAIJ,EAJI,CAAP;AAKD,CAPD;;AASA,eAAeH,mBAAf"},"metadata":{},"sourceType":"module"}